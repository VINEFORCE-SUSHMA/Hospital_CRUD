<form class="form-horizontal" autocomplete="off" #createAdmissionForm="ngForm" (ngSubmit)="save()">
    <abp-modal-header [title]="'CreatePatientAdmission' | localize" (onCloseClick)="bsModalRef.hide()"></abp-modal-header>

    <div class="modal-body">
        <tabset>
            <tab [heading]="'AdmissionDetails' | localize" class="pt-3 px-2">

                <!-- Patient Dropdown -->
                <div class="form-group row required">
                    <label class="col-md-3 col-form-label" for="patientId">{{ 'Patient' | localize }}</label>
                    <div class="col-md-9">
                        <select
                            class="form-control"
                            name="patientId"
                            id="patientId"
                            required
                            [(ngModel)]="admission.patientId"
                            #patientIdModel="ngModel"
                            #patientIdEl
                        >
                            <option value="" disabled selected>-- {{ 'SelectPatient' | localize }} --</option>
                            <option *ngFor="let patient of patients" [value]="patient.id">{{ patient.fullName }}</option>
                        </select>
                        <abp-validation-summary [control]="patientIdModel" [controlEl]="patientIdEl"></abp-validation-summary>
                    </div>
                </div>

                <!-- Doctor Dropdown -->
                <div class="form-group row required">
                    <label class="col-md-3 col-form-label" for="doctorId">{{ 'Doctor' | localize }}</label>
                    <div class="col-md-9">
                        <select
                            class="form-control"
                            name="doctorId"
                            id="doctorId"
                            required
                            [(ngModel)]="admission.doctorId"
                            #doctorIdModel="ngModel"
                            #doctorIdEl
                        >
                            <option value="" disabled selected>-- {{ 'SelectDoctor' | localize }} --</option>
                            <option *ngFor="let doctor of doctors" [value]="doctor.id">
                                {{ doctor.fullName }} - {{ doctor.specialization }}
                            </option>
                        </select>
                        <abp-validation-summary [control]="doctorIdModel" [controlEl]="doctorIdEl"></abp-validation-summary>
                    </div>
                </div>

                <!-- Bed Dropdown (Only Available Beds) -->
                <div class="form-group row required">
                    <label class="col-md-3 col-form-label" for="bedId">{{ 'Bed' | localize }}</label>
                    <div class="col-md-9">
                        <select
                            class="form-control"
                            name="bedId"
                            id="bedId"
                            required
                            [(ngModel)]="admission.bedId"
                            #bedIdModel="ngModel"
                            #bedIdEl
                        >
                            <option value="" disabled selected>-- {{ 'SelectBed' | localize }} --</option>
                            <option *ngFor="let bed of beds" [value]="bed.id" [disabled]="bed.isOccupied">
                                {{ bed.bedNumber }} 
                                <span *ngIf="bed.isOccupied">({{ 'Occupied' | localize }})</span>
                            </option>
                        </select>
                        <abp-validation-summary [control]="bedIdModel" [controlEl]="bedIdEl"></abp-validation-summary>
                    </div>
                </div>

                <!-- Admission Date -->
                <div class="form-group row required">
                    <label class="col-md-3 col-form-label" for="admissionDate">{{ 'AdmissionDate' | localize }}</label>
                    <div class="col-md-9">
                        <input
                            type="datetime-local"
                            class="form-control"
                            name="admissionDate"
                            id="admissionDate"
                            required
                            [(ngModel)]="admission.admissionDate"
                            #admissionDateModel="ngModel"
                            #admissionDateEl
                        />
                        <abp-validation-summary [control]="admissionDateModel" [controlEl]="admissionDateEl"></abp-validation-summary>
                    </div>
                </div>

                <!-- Optional Discharge Date -->
                <div class="form-group row">
                    <label class="col-md-3 col-form-label" for="dischargeDate">{{ 'DischargeDate' | localize }}</label>
                    <div class="col-md-9">
                        <input
                            type="datetime-local"
                            class="form-control"
                            name="dischargeDate"
                            id="dischargeDate"
                            [(ngModel)]="admission.dischargeDate"
                        />
                    </div>
                </div>

                <!-- Optional Diagnosis -->
                <div class="form-group row">
                    <label class="col-md-3 col-form-label" for="diagnosis">{{ 'Diagnosis' | localize }}</label>
                    <div class="col-md-9">
                        <input
                            type="text"
                            class="form-control"
                            name="diagnosis"
                            id="diagnosis"
                            [(ngModel)]="admission.diagnosis"
                        />
                    </div>
                </div>

                <!-- Optional Status -->
                <div class="form-group row">
                    <label class="col-md-3 col-form-label" for="status">{{ 'Status' | localize }}</label>
                    <div class="col-md-9">
                        <input
                            type="text"
                            class="form-control"
                            name="status"
                            id="status"
                            [(ngModel)]="admission.status"
                        />
                    </div>
                </div>

            </tab>
        </tabset>
    </div>

    <abp-modal-footer
        [cancelDisabled]="saving"
        [saveDisabled]="!createAdmissionForm.form.valid || saving"
        (onCancelClick)="bsModalRef.hide()">
    </abp-modal-footer>
</form>
